<div
  class="intro"
  ng-class="{hidden:!state.intro}">
  <div class="splash">
    <div
      ng-repeat="i in meta.intro.images"
      class="image"
      back-img="{{settings.datapath}}splash/{{i.filename}}"
      ng-style="{'background-color': i.color}"
      ng-class="{
        active: state.introimage % meta.intro.images.length == $index,
        left: state.introimage % meta.intro.images.length < $index,
        right: state.introimage % meta.intro.images.length > $index,
      }"
      ng-click="swiping ? ( swiping = false ) : slideSplashImage(true,true);"
      ng-swipe-left="slideSplashImage(true); swiping=true;"
      ng-swipe-right="slideSplashImage(false); swiping=true;">
    </div>
  </div>

  <div class="foot">
    <!-- <div class="keywords">{{meta.intro.keywords}}</div> -->
    <div class="button color-{{getRandomInt()}}" ng-click="state.intro=false;">
      {{meta.intro.enter}}
    </div>
  </div>
</div>

<div id="container" class="container" ng-class="{hidden:state.intro}">

  <div class="header">

    <div class="menu">

      <div class="backintro" ng-click="state.intro = true;">
        <i class="fa fa-angle-up fa-lg"></i><br>
        intro
      </div>
      
      <!-- BUTTONS -->
      <div class="buttons">
        <div class="button" id="lang">
          <i class="fa fa-globe fa-lg"></i>
          <span>
            <a class="setlang" ng-class="{active: state.lang=='es'}" href="{{meta.url}}/#/es">es</a>
            <a class="setlang" ng-class="{active: state.lang=='fr'}" href="{{meta.url}}/#/fr">fr</a>
          </span>
        </div>

        <a
          class="button hover"
          id="print"
          href="./#/{{state.lang}}/print"
          target="_blank">
          <i class="fa fa-print fa-lg"></i>
          <span>{{meta.menu.print}}</span>
        </a>

        <a
          class="button hover"
          id="calendar"
          href="http://demosphere.eu/fr">
          <i class="fa fa-calendar fa-lg"></i>
          <span>{{meta.menu.calendar}} <i class="fa fa-external-link-square fa-lg"></i></span>
        </a>
        <div
          class="button hover"
          ng-if="state.lang=='fr'"
          ng-click="changeLayout('map');"
          ng-class="{active:state.layout=='map'}">
          <i class="fa fa-map-o fa-lg"></i>
          <a class="ext" href="{{meta.source.map}}" target="_blank">
            <i class="fa fa-file-text fa-lg"></i>
          </a>
          <span>{{meta.menu.map}}</span>
        </div>
        <div
          class="button hover"
          ng-click="changeLayout('links');"
          ng-class="{active:state.layout=='links'}">
          <i class="fa fa-sitemap fa-lg"></i>
          <a class="ext" href="{{meta.source.links}}" target="_blank">
            <i class="fa fa-file-text fa-lg"></i>
          </a>
          <span>{{meta.menu.links}}</span>
        </div>
        <div
          class="button hover"
          ng-click="changeLayout('sections');"
          ng-class="{active:state.layout=='sections'}">
          <i class="fa fa-bullhorn fa-lg"></i>
          <a class="ext" href="{{meta.source.sections}}" target="_blank">
            <i class="fa fa-file-text fa-lg"></i>
          </a>
          <span>{{meta.menu.sections}}</span>
        </div>
      </div>

      <!-- TAGS -->
      <div class="tagsmenu" ng-class="{filtering:state.tags.length}">
        <div class="tagshat">
          <div class="tags">
            <div class="tag inactive" ng-if="!state.tags.length">{{meta.menu.tagsdefault}}</div>
            <div
              ng-if="state.tags.length"
              class="tag"
              ng-repeat="t in state.tags"
              ng-click="toggleTag(t);">{{tagsContents[t].label}}
            </div>
            <i
              ng-click="toggleTag();"
              class="clear fa fa-times fa-lg">
            </i>
          </div>
          <span class="label">{{meta.menu.tagslabel}}</span>

        </div>

        <div class="paint"></div>

        <!-- TAGS GRAPH PANEL -->
        <div class="graphtags">
          <div id="sigma-tags"></div>
          <div class="tagdescription">
            <span ng-if="state.overtag.tag">#{{state.overtag.tag}}</span> <br>
            {{state.overtag.description}}
          </div>
        </div>
      </div>

      <!-- SEARCH -->
      <div class="searchinput">
        <form autocomplete="off" ng-submit="searchSubmit(input);">
        <input
          type="text"
          placeholder="{{meta.menu.search}}"
          ng-model="input" 
          ng-click="$event.stopPropagation();"
          ng-enter="searchSubmit(input);"
          ng-class="{highlight:state.search}"/>
        </form>
        <i
          ng-if="input.length"
          ng-click="searchSubmit();"
          class="clear fa fa-times fa-lg">
        </i>
      </div>
    </div>

  </div>

  <div class="wrapper layout-{{state.layout}}">

    <div class="page" ng-include="layoutTemplate();"></div>

    <div class="footer">
      <div class="content" compile-html="meta.footer.content"></div>
      <a class="lastupdate" target="_blank" href="{{meta.repo}}">{{meta.footer.lastupdatetext}}<br>{{settings.lastupdate}}</a>
    </div>

  </div>
</div>
